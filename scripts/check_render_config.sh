#!/bin/bash

echo "ğŸ”§ Render Configuration Checker"
echo "==============================="

echo ""
echo "ğŸ“‹ Required Environment Variables for Render:"
echo "--------------------------------------------"
echo "âœ… TELEGRAM_BOT_TOKEN"
echo "âœ… OPENAI_API_KEY" 
echo "âœ… SUPABASE_URL"
echo "âœ… SUPABASE_KEY"
echo "âœ… UPSTASH_REDIS_URL"
echo "âœ… UPSTASH_REDIS_TOKEN"
echo "âœ… UPSTASH_VECTOR_REST_URL"
echo "âœ… UPSTASH_VECTOR_REST_TOKEN"
echo "âœ… CF_PROXY_SECRET (must match consumer worker)"
echo "âœ… PORT (should be auto-set by Render)"

echo ""
echo "ğŸ“‹ Required Render Service Settings:"
echo "-----------------------------------"
echo "âœ… Build Command: pip install -r requirements.txt"
echo "âœ… Start Command: python main.py"
echo "âœ… Environment: Python 3.11+"
echo "âœ… Service Type: Web Service"
echo "âœ… Port: 8000 (or auto-detected)"

echo ""
echo "ğŸ” Common Issues:"
echo "----------------"
echo "âŒ Missing CF_PROXY_SECRET environment variable"
echo "âŒ Wrong Python version (needs 3.9+)"
echo "âŒ Missing dependencies in requirements.txt"
echo "âŒ main.py not in root directory"
echo "âŒ Port binding issues (should use PORT env var)"

echo ""
echo "ğŸš¨ Check Render Dashboard:"
echo "-------------------------"
echo "1. Go to https://dashboard.render.com"
echo "2. Find your brainbot service"
echo "3. Check 'Logs' tab for errors"
echo "4. Verify 'Environment' tab has all variables"
echo "5. Check 'Settings' for build/start commands"

echo ""
echo "ğŸ”§ Quick Fix Commands:"
echo "---------------------"
echo "# If service is failing, try manual deploy:"
echo "# 1. Go to Render dashboard"
echo "# 2. Click 'Manual Deploy' â†’ 'Deploy latest commit'"
echo ""
echo "# If environment variables are missing:"
echo "# 1. Go to Environment tab in Render"
echo "# 2. Add missing variables from your .env file"