{"created": 1753136885.021141, "duration": 614.2285571098328, "exitcode": 1, "root": "/Users/colinaulds/Desktop/projects/markdown-brain-bot", "environment": {}, "summary": {"passed": 20, "failed": 1, "total": 21, "collected": 21}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests/test_ai_babysitter.py", "type": "Module"}]}, {"nodeid": "tests/test_ai_babysitter.py", "outcome": "passed", "result": [{"nodeid": "tests/test_ai_babysitter.py::test_bot_saves_and_retrieves_notes", "type": "Coroutine", "lineno": 38}, {"nodeid": "tests/test_ai_babysitter.py::test_bot_responds_to_basic_queries", "type": "Coroutine", "lineno": 68}, {"nodeid": "tests/test_ai_babysitter.py::test_bot_handles_edge_cases", "type": "Coroutine", "lineno": 94}, {"nodeid": "tests/test_ai_babysitter.py::test_cache_actually_works", "type": "Coroutine", "lineno": 120}, {"nodeid": "tests/test_ai_babysitter.py::test_not_calling_api_repeatedly_for_same_request", "type": "Coroutine", "lineno": 144}, {"nodeid": "tests/test_ai_babysitter.py::test_conversation_history_not_growing_infinitely", "type": "Coroutine", "lineno": 168}, {"nodeid": "tests/test_ai_babysitter.py::test_retry_logic_actually_works", "type": "Coroutine", "lineno": 194}, {"nodeid": "tests/test_ai_babysitter.py::test_response_time_reasonable", "type": "Coroutine", "lineno": 244}, {"nodeid": "tests/test_ai_babysitter.py::test_no_obvious_memory_leaks", "type": "Coroutine", "lineno": 255}, {"nodeid": "tests/test_ai_babysitter.py::test_database_connections_not_leaking", "type": "Coroutine", "lineno": 274}, {"nodeid": "tests/test_ai_babysitter.py::test_everything_works_together", "type": "Coroutine", "lineno": 302}, {"nodeid": "tests/test_ai_babysitter.py::test_no_unreachable_code", "type": "Coroutine", "lineno": 363}, {"nodeid": "tests/test_ai_babysitter.py::test_retry_config_actually_applied", "type": "Coroutine", "lineno": 378}, {"nodeid": "tests/test_ai_babysitter.py::test_errors_dont_crash_bot", "type": "Coroutine", "lineno": 393}, {"nodeid": "tests/test_ai_babysitter.py::test_note_update_functionality", "type": "Coroutine", "lineno": 415}, {"nodeid": "tests/test_ai_babysitter.py::test_new_feature_didnt_break_old_features", "type": "Coroutine", "lineno": 472}, {"nodeid": "tests/test_ai_babysitter.py::test_ai_agents_using_same_patterns", "type": "Coroutine", "lineno": 526}, {"nodeid": "tests/test_ai_babysitter.py::test_data_survives_restart", "type": "Coroutine", "lineno": 546}, {"nodeid": "tests/test_ai_babysitter.py::test_multiple_users_share_namespace", "type": "Coroutine", "lineno": 571}, {"nodeid": "tests/test_ai_babysitter.py::test_not_burning_api_credits", "type": "Coroutine", "lineno": 607}, {"nodeid": "tests/test_ai_babysitter.py::test_system_components_available", "type": "Coroutine", "lineno": 640}]}], "tests": [{"nodeid": "tests/test_ai_babysitter.py::test_bot_saves_and_retrieves_notes", "lineno": 38, "outcome": "passed", "keywords": ["test_bot_saves_and_retrieves_notes", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.018125084000000014, "outcome": "passed"}, "call": {"duration": 21.205626541, "outcome": "passed"}, "teardown": {"duration": 0.013669834000001657, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_bot_responds_to_basic_queries", "lineno": 68, "outcome": "passed", "keywords": ["test_bot_responds_to_basic_queries", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0004984579999991468, "outcome": "passed"}, "call": {"duration": 32.803050625, "outcome": "passed"}, "teardown": {"duration": 0.010251124999996364, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_bot_handles_edge_cases", "lineno": 94, "outcome": "passed", "keywords": ["test_bot_handles_edge_cases", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.001141916000001686, "outcome": "passed"}, "call": {"duration": 49.136379917, "outcome": "passed"}, "teardown": {"duration": 0.008679207999989558, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_cache_actually_works", "lineno": 120, "outcome": "passed", "keywords": ["test_cache_actually_works", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0007767080000036231, "outcome": "passed"}, "call": {"duration": 3.4639751669999868, "outcome": "passed"}, "teardown": {"duration": 0.008871333999991293, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_not_calling_api_repeatedly_for_same_request", "lineno": 144, "outcome": "passed", "keywords": ["test_not_calling_api_repeatedly_for_same_request", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0008431249999887314, "outcome": "passed"}, "call": {"duration": 12.597565958999994, "outcome": "passed", "log": [{"name": "src.core.api_client", "msg": "API call failed after 1 attempts: object MagicMock can't be used in 'await' expression", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 177, "funcName": "call_with_retry", "created": 1753136383.565865, "msecs": 565.8650398254395, "relativeCreated": 113249.98211860657, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}, {"name": "src.core.llm", "msg": "Error processing message: object MagicMock can't be used in 'await' expression", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py", "filename": "llm.py", "module": "llm", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py\", line 382, in process_message\n    response = await resilient_client.chat_completion(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 215, in chat_completion\n    return await self.call_with_retry(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 134, in call_with_retry\n    result = await api_call_func(*args, **kwargs)\nTypeError: object MagicMock can't be used in 'await' expression", "stack_info": null, "lineno": 445, "funcName": "process_message", "created": 1753136383.566077, "msecs": 566.0769939422607, "relativeCreated": 113250.19407272339, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}, {"name": "src.core.api_client", "msg": "API call failed after 1 attempts: object MagicMock can't be used in 'await' expression", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 177, "funcName": "call_with_retry", "created": 1753136389.829684, "msecs": 829.6840190887451, "relativeCreated": 119513.80109786987, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}, {"name": "src.core.llm", "msg": "Error processing message: object MagicMock can't be used in 'await' expression", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py", "filename": "llm.py", "module": "llm", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py\", line 382, in process_message\n    response = await resilient_client.chat_completion(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 215, in chat_completion\n    return await self.call_with_retry(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 134, in call_with_retry\n    result = await api_call_func(*args, **kwargs)\nTypeError: object MagicMock can't be used in 'await' expression", "stack_info": null, "lineno": 445, "funcName": "process_message", "created": 1753136389.829791, "msecs": 829.7910690307617, "relativeCreated": 119513.90814781189, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}]}, "teardown": {"duration": 0.0033912499999928514, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_conversation_history_not_growing_infinitely", "lineno": 168, "outcome": "passed", "keywords": ["test_conversation_history_not_growing_infinitely", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.00038274999999998727, "outcome": "passed"}, "call": {"duration": 5.558830333000003, "outcome": "passed"}, "teardown": {"duration": 0.00941408300001001, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_retry_logic_actually_works", "lineno": 194, "outcome": "passed", "keywords": ["test_retry_logic_actually_works", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0008061669999932519, "outcome": "passed"}, "call": {"duration": 2.62714008399999, "outcome": "passed", "log": [{"name": "src.core.api_client", "msg": "API call failed (attempt 1), retrying in 0.57s: Rate limit exceeded", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 184, "funcName": "call_with_retry", "created": 1753136395.964695, "msecs": 964.6949768066406, "relativeCreated": 125648.81205558777, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}, {"name": "src.core.api_client", "msg": "API call failed (attempt 2), retrying in 1.41s: Request timed out.", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 184, "funcName": "call_with_retry", "created": 1753136396.531221, "msecs": 531.2209129333496, "relativeCreated": 126215.33799171448, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}]}, "teardown": {"duration": 0.0064001249999989795, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_response_time_reasonable", "lineno": 244, "outcome": "passed", "keywords": ["test_response_time_reasonable", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0003699999999753345, "outcome": "passed"}, "call": {"duration": 8.829053750000014, "outcome": "passed"}, "teardown": {"duration": 0.010034041000011484, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_no_obvious_memory_leaks", "lineno": 255, "outcome": "passed", "keywords": ["test_no_obvious_memory_leaks", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0009305000000097152, "outcome": "passed"}, "call": {"duration": 259.474786292, "outcome": "passed"}, "teardown": {"duration": 0.018428499999970427, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_database_connections_not_leaking", "lineno": 274, "outcome": "passed", "keywords": ["test_database_connections_not_leaking", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.00126345799998262, "outcome": "passed"}, "call": {"duration": 14.948250458000018, "outcome": "passed"}, "teardown": {"duration": 0.009823916000016197, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_everything_works_together", "lineno": 302, "outcome": "failed", "keywords": ["test_everything_works_together", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.000788375000013275, "outcome": "passed"}, "call": {"duration": 12.687947041999962, "outcome": "failed", "crash": {"path": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/tests/test_ai_babysitter.py", "lineno": 356, "message": "Failed: Integration test failed: AssertionError: Expected save confirmation or update question, got: It seems there was an issue locating the existing file. Let me search for the correct file path and try again.\n  \n  \ud83d\udcda Sources:\n  \u2022 project deadline and code review - /documents/edc2adf3-3360-4b71-936b-d0ff488ce9ce\n  \u2022 README - /documents/8f4f7420-9a97-42e1-8cee-a4b66038371d\n  \u2022 persistent note - /documents/66ada39e-f7f8-4f7b-84c6-a3022c5acc22\nassert False\n +  where False = any(<generator object test_everything_works_together.<locals>.<genexpr> at 0x11163dcf0>)"}, "traceback": [{"path": "tests/test_ai_babysitter.py", "lineno": 356, "message": "in test_everything_works_together"}], "longrepr": "tests/test_ai_babysitter.py:319: in test_everything_works_together\n    assert any(word in save_response.lower() for word in\nE   AssertionError: Expected save confirmation or update question, got: It seems there was an issue locating the existing file. Let me search for the correct file path and try again.\nE     \nE     \ud83d\udcda Sources:\nE     \u2022 project deadline and code review - /documents/edc2adf3-3360-4b71-936b-d0ff488ce9ce\nE     \u2022 README - /documents/8f4f7420-9a97-42e1-8cee-a4b66038371d\nE     \u2022 persistent note - /documents/66ada39e-f7f8-4f7b-84c6-a3022c5acc22\nE   assert False\nE    +  where False = any(<generator object test_everything_works_together.<locals>.<genexpr> at 0x11163dcf0>)\n\nDuring handling of the above exception, another exception occurred:\ntests/test_ai_babysitter.py:356: in test_everything_works_together\n    pytest.fail(f\"Integration test failed: {type(e).__name__}: {e}\")\nE   Failed: Integration test failed: AssertionError: Expected save confirmation or update question, got: It seems there was an issue locating the existing file. Let me search for the correct file path and try again.\nE     \nE     \ud83d\udcda Sources:\nE     \u2022 project deadline and code review - /documents/edc2adf3-3360-4b71-936b-d0ff488ce9ce\nE     \u2022 README - /documents/8f4f7420-9a97-42e1-8cee-a4b66038371d\nE     \u2022 persistent note - /documents/66ada39e-f7f8-4f7b-84c6-a3022c5acc22\nE   assert False\nE    +  where False = any(<generator object test_everything_works_together.<locals>.<genexpr> at 0x11163dcf0>)"}, "teardown": {"duration": 0.003442291999988356, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_no_unreachable_code", "lineno": 363, "outcome": "passed", "keywords": ["test_no_unreachable_code", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.00038908299995910056, "outcome": "passed"}, "call": {"duration": 9.226356125000052, "outcome": "passed"}, "teardown": {"duration": 0.010301749999996446, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_retry_config_actually_applied", "lineno": 378, "outcome": "passed", "keywords": ["test_retry_config_actually_applied", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0011404999999626853, "outcome": "passed"}, "call": {"duration": 0.00035133400001541304, "outcome": "passed"}, "teardown": {"duration": 0.010739084000022103, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_errors_dont_crash_bot", "lineno": 393, "outcome": "passed", "keywords": ["test_errors_dont_crash_bot", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0009641670000064551, "outcome": "passed"}, "call": {"duration": 29.63990741599997, "outcome": "passed", "log": [{"name": "src.core.api_client", "msg": "API call failed after 1 attempts: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 177, "funcName": "call_with_retry", "created": 1753136707.843829, "msecs": 843.8289165496826, "relativeCreated": 437527.9459953308, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}, {"name": "src.core.llm", "msg": "Error processing message: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py", "filename": "llm.py", "module": "llm", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py\", line 382, in process_message\n    response = await resilient_client.chat_completion(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 215, in chat_completion\n    return await self.call_with_retry(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 134, in call_with_retry\n    result = await api_call_func(*args, **kwargs)\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/resources/chat/completions/completions.py\", line 2454, in create\n    return await self._post(\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/_base_client.py\", line 1791, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/_base_client.py\", line 1591, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "stack_info": null, "lineno": 445, "funcName": "process_message", "created": 1753136707.8441331, "msecs": 844.1331386566162, "relativeCreated": 437528.25021743774, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}, {"name": "src.core.api_client", "msg": "API call failed after 1 attempts: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 177, "funcName": "call_with_retry", "created": 1753136714.614707, "msecs": 614.7069931030273, "relativeCreated": 444298.82407188416, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}, {"name": "src.core.llm", "msg": "Error processing message: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py", "filename": "llm.py", "module": "llm", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py\", line 382, in process_message\n    response = await resilient_client.chat_completion(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 215, in chat_completion\n    return await self.call_with_retry(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 134, in call_with_retry\n    result = await api_call_func(*args, **kwargs)\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/resources/chat/completions/completions.py\", line 2454, in create\n    return await self._post(\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/_base_client.py\", line 1791, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/_base_client.py\", line 1591, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "stack_info": null, "lineno": 445, "funcName": "process_message", "created": 1753136714.614906, "msecs": 614.9060726165771, "relativeCreated": 444299.0231513977, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}, {"name": "src.core.api_client", "msg": "API call failed after 1 attempts: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 177, "funcName": "call_with_retry", "created": 1753136720.8208241, "msecs": 820.824146270752, "relativeCreated": 450504.9412250519, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}, {"name": "src.core.llm", "msg": "Error processing message: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py", "filename": "llm.py", "module": "llm", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py\", line 382, in process_message\n    response = await resilient_client.chat_completion(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 215, in chat_completion\n    return await self.call_with_retry(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 134, in call_with_retry\n    result = await api_call_func(*args, **kwargs)\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/resources/chat/completions/completions.py\", line 2454, in create\n    return await self._post(\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/_base_client.py\", line 1791, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/_base_client.py\", line 1591, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "stack_info": null, "lineno": 445, "funcName": "process_message", "created": 1753136720.820958, "msecs": 820.9578990936279, "relativeCreated": 450505.07497787476, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}, {"name": "src.core.api_client", "msg": "API call failed after 1 attempts: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 177, "funcName": "call_with_retry", "created": 1753136726.682452, "msecs": 682.4519634246826, "relativeCreated": 456366.5690422058, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}, {"name": "src.core.llm", "msg": "Error processing message: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py", "filename": "llm.py", "module": "llm", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py\", line 382, in process_message\n    response = await resilient_client.chat_completion(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 215, in chat_completion\n    return await self.call_with_retry(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 134, in call_with_retry\n    result = await api_call_func(*args, **kwargs)\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/resources/chat/completions/completions.py\", line 2454, in create\n    return await self._post(\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/_base_client.py\", line 1791, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/_base_client.py\", line 1591, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "stack_info": null, "lineno": 445, "funcName": "process_message", "created": 1753136726.6827588, "msecs": 682.7588081359863, "relativeCreated": 456366.8758869171, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}, {"name": "src.core.api_client", "msg": "API call failed after 1 attempts: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 177, "funcName": "call_with_retry", "created": 1753136733.004898, "msecs": 4.8980712890625, "relativeCreated": 462689.0151500702, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}, {"name": "src.core.llm", "msg": "Error processing message: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py", "filename": "llm.py", "module": "llm", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py\", line 382, in process_message\n    response = await resilient_client.chat_completion(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 215, in chat_completion\n    return await self.call_with_retry(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 134, in call_with_retry\n    result = await api_call_func(*args, **kwargs)\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/resources/chat/completions/completions.py\", line 2454, in create\n    return await self._post(\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/_base_client.py\", line 1791, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/_base_client.py\", line 1591, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "stack_info": null, "lineno": 445, "funcName": "process_message", "created": 1753136733.005023, "msecs": 5.023002624511719, "relativeCreated": 462689.14008140564, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}]}, "teardown": {"duration": 0.014296458000046641, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_note_update_functionality", "lineno": 415, "outcome": "passed", "keywords": ["test_note_update_functionality", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0009452079999618945, "outcome": "passed"}, "call": {"duration": 23.598007834000043, "outcome": "passed"}, "teardown": {"duration": 0.010378500000001623, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_new_feature_didnt_break_old_features", "lineno": 472, "outcome": "passed", "keywords": ["test_new_feature_didnt_break_old_features", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.00081145900003321, "outcome": "passed"}, "call": {"duration": 46.95000612499996, "outcome": "passed"}, "teardown": {"duration": 0.008562458000028528, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_ai_agents_using_same_patterns", "lineno": 526, "outcome": "passed", "keywords": ["test_ai_agents_using_same_patterns", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0009558339999102827, "outcome": "passed"}, "call": {"duration": 0.0002564580000807837, "outcome": "passed"}, "teardown": {"duration": 0.0074065420000124504, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_data_survives_restart", "lineno": 546, "outcome": "passed", "keywords": ["test_data_survives_restart", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.00040341700002954894, "outcome": "passed"}, "call": {"duration": 17.32651495799996, "outcome": "passed"}, "teardown": {"duration": 0.009507291999966583, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_multiple_users_share_namespace", "lineno": 571, "outcome": "passed", "keywords": ["test_multiple_users_share_namespace", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0008512499999824286, "outcome": "passed"}, "call": {"duration": 41.077769750000016, "outcome": "passed"}, "teardown": {"duration": 0.009490999999911764, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_not_burning_api_credits", "lineno": 607, "outcome": "passed", "keywords": ["test_not_burning_api_credits", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0009687919999805672, "outcome": "passed"}, "call": {"duration": 18.73623637500009, "outcome": "passed", "log": [{"name": "src.core.api_client", "msg": "API call failed after 1 attempts: object MagicMock can't be used in 'await' expression", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 177, "funcName": "call_with_retry", "created": 1753136868.0319428, "msecs": 31.94284439086914, "relativeCreated": 597716.059923172, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}, {"name": "src.core.llm", "msg": "Error processing message: object MagicMock can't be used in 'await' expression", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py", "filename": "llm.py", "module": "llm", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py\", line 382, in process_message\n    response = await resilient_client.chat_completion(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 215, in chat_completion\n    return await self.call_with_retry(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 134, in call_with_retry\n    result = await api_call_func(*args, **kwargs)\nTypeError: object MagicMock can't be used in 'await' expression", "stack_info": null, "lineno": 445, "funcName": "process_message", "created": 1753136868.032269, "msecs": 32.26900100708008, "relativeCreated": 597716.3860797882, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}, {"name": "src.core.api_client", "msg": "API call failed after 1 attempts: object MagicMock can't be used in 'await' expression", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 177, "funcName": "call_with_retry", "created": 1753136874.501597, "msecs": 501.59692764282227, "relativeCreated": 604185.714006424, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}, {"name": "src.core.llm", "msg": "Error processing message: object MagicMock can't be used in 'await' expression", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py", "filename": "llm.py", "module": "llm", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py\", line 382, in process_message\n    response = await resilient_client.chat_completion(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 215, in chat_completion\n    return await self.call_with_retry(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 134, in call_with_retry\n    result = await api_call_func(*args, **kwargs)\nTypeError: object MagicMock can't be used in 'await' expression", "stack_info": null, "lineno": 445, "funcName": "process_message", "created": 1753136874.501771, "msecs": 501.7709732055664, "relativeCreated": 604185.8880519867, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}, {"name": "src.core.api_client", "msg": "API call failed after 1 attempts: object MagicMock can't be used in 'await' expression", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 177, "funcName": "call_with_retry", "created": 1753136880.767376, "msecs": 767.3759460449219, "relativeCreated": 610451.493024826, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}, {"name": "src.core.llm", "msg": "Error processing message: object MagicMock can't be used in 'await' expression", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py", "filename": "llm.py", "module": "llm", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py\", line 382, in process_message\n    response = await resilient_client.chat_completion(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 215, in chat_completion\n    return await self.call_with_retry(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 134, in call_with_retry\n    result = await api_call_func(*args, **kwargs)\nTypeError: object MagicMock can't be used in 'await' expression", "stack_info": null, "lineno": 445, "funcName": "process_message", "created": 1753136880.767454, "msecs": 767.4539089202881, "relativeCreated": 610451.5709877014, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 47544}]}, "teardown": {"duration": 0.00898320800001784, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_system_components_available", "lineno": 640, "outcome": "passed", "keywords": ["test_system_components_available", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0008474999999634747, "outcome": "passed"}, "call": {"duration": 3.6731469590000643, "outcome": "passed"}, "teardown": {"duration": 0.010255041999926107, "outcome": "passed"}}], "warnings": [{"message": "The 'timeout' parameter is deprecated. Please configure it in the http client instead.", "category": "DeprecationWarning", "when": "runtest", "filename": "/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/supabase/_sync/client.py", "lineno": 303}, {"message": "The 'verify' parameter is deprecated. Please configure it in the http client instead.", "category": "DeprecationWarning", "when": "runtest", "filename": "/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/supabase/_sync/client.py", "lineno": 303}]}