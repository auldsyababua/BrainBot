{"created": 1753138816.263903, "duration": 693.5733370780945, "exitcode": 1, "root": "/Users/colinaulds/Desktop/projects/markdown-brain-bot", "environment": {}, "summary": {"passed": 20, "failed": 1, "total": 21, "collected": 21}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests/test_ai_babysitter.py", "type": "Module"}]}, {"nodeid": "tests/test_ai_babysitter.py", "outcome": "passed", "result": [{"nodeid": "tests/test_ai_babysitter.py::test_bot_saves_and_retrieves_notes", "type": "Coroutine", "lineno": 38}, {"nodeid": "tests/test_ai_babysitter.py::test_bot_responds_to_basic_queries", "type": "Coroutine", "lineno": 68}, {"nodeid": "tests/test_ai_babysitter.py::test_bot_handles_edge_cases", "type": "Coroutine", "lineno": 94}, {"nodeid": "tests/test_ai_babysitter.py::test_cache_actually_works", "type": "Coroutine", "lineno": 120}, {"nodeid": "tests/test_ai_babysitter.py::test_not_calling_api_repeatedly_for_same_request", "type": "Coroutine", "lineno": 144}, {"nodeid": "tests/test_ai_babysitter.py::test_conversation_history_not_growing_infinitely", "type": "Coroutine", "lineno": 168}, {"nodeid": "tests/test_ai_babysitter.py::test_retry_logic_actually_works", "type": "Coroutine", "lineno": 194}, {"nodeid": "tests/test_ai_babysitter.py::test_response_time_reasonable", "type": "Coroutine", "lineno": 244}, {"nodeid": "tests/test_ai_babysitter.py::test_no_obvious_memory_leaks", "type": "Coroutine", "lineno": 255}, {"nodeid": "tests/test_ai_babysitter.py::test_database_connections_not_leaking", "type": "Coroutine", "lineno": 274}, {"nodeid": "tests/test_ai_babysitter.py::test_everything_works_together", "type": "Coroutine", "lineno": 302}, {"nodeid": "tests/test_ai_babysitter.py::test_no_unreachable_code", "type": "Coroutine", "lineno": 363}, {"nodeid": "tests/test_ai_babysitter.py::test_retry_config_actually_applied", "type": "Coroutine", "lineno": 378}, {"nodeid": "tests/test_ai_babysitter.py::test_errors_dont_crash_bot", "type": "Coroutine", "lineno": 393}, {"nodeid": "tests/test_ai_babysitter.py::test_note_update_functionality", "type": "Coroutine", "lineno": 415}, {"nodeid": "tests/test_ai_babysitter.py::test_new_feature_didnt_break_old_features", "type": "Coroutine", "lineno": 472}, {"nodeid": "tests/test_ai_babysitter.py::test_ai_agents_using_same_patterns", "type": "Coroutine", "lineno": 526}, {"nodeid": "tests/test_ai_babysitter.py::test_data_survives_restart", "type": "Coroutine", "lineno": 546}, {"nodeid": "tests/test_ai_babysitter.py::test_multiple_users_share_namespace", "type": "Coroutine", "lineno": 571}, {"nodeid": "tests/test_ai_babysitter.py::test_not_burning_api_credits", "type": "Coroutine", "lineno": 607}, {"nodeid": "tests/test_ai_babysitter.py::test_system_components_available", "type": "Coroutine", "lineno": 640}]}], "tests": [{"nodeid": "tests/test_ai_babysitter.py::test_bot_saves_and_retrieves_notes", "lineno": 38, "outcome": "passed", "keywords": ["test_bot_saves_and_retrieves_notes", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.01977645799999994, "outcome": "passed"}, "call": {"duration": 21.155388584, "outcome": "passed"}, "teardown": {"duration": 0.01389333299999862, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_bot_responds_to_basic_queries", "lineno": 68, "outcome": "passed", "keywords": ["test_bot_responds_to_basic_queries", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0004695000000012328, "outcome": "passed"}, "call": {"duration": 43.355674417, "outcome": "passed"}, "teardown": {"duration": 0.010609084000009261, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_bot_handles_edge_cases", "lineno": 94, "outcome": "passed", "keywords": ["test_bot_handles_edge_cases", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.000823500000009858, "outcome": "passed"}, "call": {"duration": 56.820377292, "outcome": "passed"}, "teardown": {"duration": 0.010227207999989218, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_cache_actually_works", "lineno": 120, "outcome": "passed", "keywords": ["test_cache_actually_works", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0010735409999966805, "outcome": "passed"}, "call": {"duration": 3.360972250000003, "outcome": "passed"}, "teardown": {"duration": 0.009797125000005735, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_not_calling_api_repeatedly_for_same_request", "lineno": 144, "outcome": "passed", "keywords": ["test_not_calling_api_repeatedly_for_same_request", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0009294590000052949, "outcome": "passed"}, "call": {"duration": 12.044751582999993, "outcome": "passed", "log": [{"name": "src.core.api_client", "msg": "API call failed after 1 attempts: object MagicMock can't be used in 'await' expression", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 177, "funcName": "call_with_retry", "created": 1753138253.3836448, "msecs": 383.64481925964355, "relativeCreated": 131144.7048187256, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}, {"name": "src.core.llm", "msg": "Error processing message: object MagicMock can't be used in 'await' expression", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py", "filename": "llm.py", "module": "llm", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py\", line 382, in process_message\n    response = await resilient_client.chat_completion(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 215, in chat_completion\n    return await self.call_with_retry(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 134, in call_with_retry\n    result = await api_call_func(*args, **kwargs)\nTypeError: object MagicMock can't be used in 'await' expression", "stack_info": null, "lineno": 445, "funcName": "process_message", "created": 1753138253.384004, "msecs": 384.0041160583496, "relativeCreated": 131145.0641155243, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}, {"name": "src.core.api_client", "msg": "API call failed after 1 attempts: object MagicMock can't be used in 'await' expression", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 177, "funcName": "call_with_retry", "created": 1753138259.276522, "msecs": 276.5219211578369, "relativeCreated": 137037.58192062378, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}, {"name": "src.core.llm", "msg": "Error processing message: object MagicMock can't be used in 'await' expression", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py", "filename": "llm.py", "module": "llm", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py\", line 382, in process_message\n    response = await resilient_client.chat_completion(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 215, in chat_completion\n    return await self.call_with_retry(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 134, in call_with_retry\n    result = await api_call_func(*args, **kwargs)\nTypeError: object MagicMock can't be used in 'await' expression", "stack_info": null, "lineno": 445, "funcName": "process_message", "created": 1753138259.276709, "msecs": 276.70907974243164, "relativeCreated": 137037.76907920837, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}]}, "teardown": {"duration": 0.00966050000002383, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_conversation_history_not_growing_infinitely", "lineno": 168, "outcome": "passed", "keywords": ["test_conversation_history_not_growing_infinitely", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0009059999999863066, "outcome": "passed"}, "call": {"duration": 5.824153375000009, "outcome": "passed"}, "teardown": {"duration": 0.00683629099998484, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_retry_logic_actually_works", "lineno": 194, "outcome": "passed", "keywords": ["test_retry_logic_actually_works", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0007532080000203223, "outcome": "passed"}, "call": {"duration": 2.4119140409999886, "outcome": "passed", "log": [{"name": "src.core.api_client", "msg": "API call failed (attempt 1), retrying in 0.72s: Rate limit exceeded", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 184, "funcName": "call_with_retry", "created": 1753138265.683061, "msecs": 683.060884475708, "relativeCreated": 143444.12088394165, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}, {"name": "src.core.api_client", "msg": "API call failed (attempt 2), retrying in 1.02s: Request timed out.", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 184, "funcName": "call_with_retry", "created": 1753138266.403233, "msecs": 403.2330513000488, "relativeCreated": 144164.293050766, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}]}, "teardown": {"duration": 0.010531917000008661, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_response_time_reasonable", "lineno": 244, "outcome": "passed", "keywords": ["test_response_time_reasonable", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.000866833000003453, "outcome": "passed"}, "call": {"duration": 10.743010792000007, "outcome": "passed"}, "teardown": {"duration": 0.00961224999997512, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_no_obvious_memory_leaks", "lineno": 255, "outcome": "passed", "keywords": ["test_no_obvious_memory_leaks", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0009724580000067817, "outcome": "passed"}, "call": {"duration": 318.283869375, "outcome": "passed"}, "teardown": {"duration": 0.012918540999976358, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_database_connections_not_leaking", "lineno": 274, "outcome": "passed", "keywords": ["test_database_connections_not_leaking", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.001089707999994971, "outcome": "passed"}, "call": {"duration": 15.04438133399998, "outcome": "passed"}, "teardown": {"duration": 0.010551708000036797, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_everything_works_together", "lineno": 302, "outcome": "failed", "keywords": ["test_everything_works_together", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0008949580000034985, "outcome": "passed"}, "call": {"duration": 12.49199362500002, "outcome": "failed", "crash": {"path": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/tests/test_ai_babysitter.py", "lineno": 356, "message": "Failed: Integration test failed: AssertionError: Expected save confirmation or update question, got: It seems there was an issue locating the file \"project-deadline-and-code-review.md\" in the Eagle Lake folder. Let me search for the correct file path and try again.\n  \n  \ud83d\udcda Sources:\n  \u2022 project deadline and code review - /documents/edc2adf3-3360-4b71-936b-d0ff488ce9ce\n  \u2022 README - /documents/8f4f7420-9a97-42e1-8cee-a4b66038371d\n  \u2022 persistent note - /documents/66ada39e-f7f8-4f7b-84c6-a3022c5acc22\nassert False\n +  where False = any(<generator object test_everything_works_together.<locals>.<genexpr> at 0x111c89e40>)"}, "traceback": [{"path": "tests/test_ai_babysitter.py", "lineno": 356, "message": "in test_everything_works_together"}], "longrepr": "tests/test_ai_babysitter.py:319: in test_everything_works_together\n    assert any(word in save_response.lower() for word in\nE   AssertionError: Expected save confirmation or update question, got: It seems there was an issue locating the file \"project-deadline-and-code-review.md\" in the Eagle Lake folder. Let me search for the correct file path and try again.\nE     \nE     \ud83d\udcda Sources:\nE     \u2022 project deadline and code review - /documents/edc2adf3-3360-4b71-936b-d0ff488ce9ce\nE     \u2022 README - /documents/8f4f7420-9a97-42e1-8cee-a4b66038371d\nE     \u2022 persistent note - /documents/66ada39e-f7f8-4f7b-84c6-a3022c5acc22\nE   assert False\nE    +  where False = any(<generator object test_everything_works_together.<locals>.<genexpr> at 0x111c89e40>)\n\nDuring handling of the above exception, another exception occurred:\ntests/test_ai_babysitter.py:356: in test_everything_works_together\n    pytest.fail(f\"Integration test failed: {type(e).__name__}: {e}\")\nE   Failed: Integration test failed: AssertionError: Expected save confirmation or update question, got: It seems there was an issue locating the file \"project-deadline-and-code-review.md\" in the Eagle Lake folder. Let me search for the correct file path and try again.\nE     \nE     \ud83d\udcda Sources:\nE     \u2022 project deadline and code review - /documents/edc2adf3-3360-4b71-936b-d0ff488ce9ce\nE     \u2022 README - /documents/8f4f7420-9a97-42e1-8cee-a4b66038371d\nE     \u2022 persistent note - /documents/66ada39e-f7f8-4f7b-84c6-a3022c5acc22\nE   assert False\nE    +  where False = any(<generator object test_everything_works_together.<locals>.<genexpr> at 0x111c89e40>)"}, "teardown": {"duration": 0.0033447920000071463, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_no_unreachable_code", "lineno": 363, "outcome": "passed", "keywords": ["test_no_unreachable_code", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0003732920000061313, "outcome": "passed"}, "call": {"duration": 8.827898374999961, "outcome": "passed"}, "teardown": {"duration": 0.01099716700002773, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_retry_config_actually_applied", "lineno": 378, "outcome": "passed", "keywords": ["test_retry_config_actually_applied", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0013585000000375658, "outcome": "passed"}, "call": {"duration": 0.00044516599996313744, "outcome": "passed"}, "teardown": {"duration": 0.004655917000036425, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_errors_dont_crash_bot", "lineno": 393, "outcome": "passed", "keywords": ["test_errors_dont_crash_bot", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0003641669999865371, "outcome": "passed"}, "call": {"duration": 31.085997582999994, "outcome": "passed", "log": [{"name": "src.core.api_client", "msg": "API call failed after 1 attempts: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 177, "funcName": "call_with_retry", "created": 1753138637.848727, "msecs": 848.7269878387451, "relativeCreated": 515609.7869873047, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}, {"name": "src.core.llm", "msg": "Error processing message: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py", "filename": "llm.py", "module": "llm", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py\", line 382, in process_message\n    response = await resilient_client.chat_completion(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 215, in chat_completion\n    return await self.call_with_retry(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 134, in call_with_retry\n    result = await api_call_func(*args, **kwargs)\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/resources/chat/completions/completions.py\", line 2454, in create\n    return await self._post(\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/_base_client.py\", line 1791, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/_base_client.py\", line 1591, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "stack_info": null, "lineno": 445, "funcName": "process_message", "created": 1753138637.848966, "msecs": 848.9658832550049, "relativeCreated": 515610.02588272095, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}, {"name": "src.core.api_client", "msg": "API call failed after 1 attempts: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 177, "funcName": "call_with_retry", "created": 1753138644.618772, "msecs": 618.772029876709, "relativeCreated": 522379.83202934265, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}, {"name": "src.core.llm", "msg": "Error processing message: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py", "filename": "llm.py", "module": "llm", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py\", line 382, in process_message\n    response = await resilient_client.chat_completion(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 215, in chat_completion\n    return await self.call_with_retry(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 134, in call_with_retry\n    result = await api_call_func(*args, **kwargs)\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/resources/chat/completions/completions.py\", line 2454, in create\n    return await self._post(\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/_base_client.py\", line 1791, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/_base_client.py\", line 1591, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "stack_info": null, "lineno": 445, "funcName": "process_message", "created": 1753138644.618944, "msecs": 618.9439296722412, "relativeCreated": 522380.0039291382, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}, {"name": "src.core.api_client", "msg": "API call failed after 1 attempts: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 177, "funcName": "call_with_retry", "created": 1753138651.0209138, "msecs": 20.91383934020996, "relativeCreated": 528781.9738388062, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}, {"name": "src.core.llm", "msg": "Error processing message: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py", "filename": "llm.py", "module": "llm", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py\", line 382, in process_message\n    response = await resilient_client.chat_completion(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 215, in chat_completion\n    return await self.call_with_retry(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 134, in call_with_retry\n    result = await api_call_func(*args, **kwargs)\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/resources/chat/completions/completions.py\", line 2454, in create\n    return await self._post(\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/_base_client.py\", line 1791, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/_base_client.py\", line 1591, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "stack_info": null, "lineno": 445, "funcName": "process_message", "created": 1753138651.021085, "msecs": 21.085023880004883, "relativeCreated": 528782.145023346, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}, {"name": "src.core.api_client", "msg": "API call failed after 1 attempts: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 177, "funcName": "call_with_retry", "created": 1753138657.0219462, "msecs": 21.946191787719727, "relativeCreated": 534783.0061912537, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}, {"name": "src.core.llm", "msg": "Error processing message: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py", "filename": "llm.py", "module": "llm", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py\", line 382, in process_message\n    response = await resilient_client.chat_completion(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 215, in chat_completion\n    return await self.call_with_retry(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 134, in call_with_retry\n    result = await api_call_func(*args, **kwargs)\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/resources/chat/completions/completions.py\", line 2454, in create\n    return await self._post(\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/_base_client.py\", line 1791, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/_base_client.py\", line 1591, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "stack_info": null, "lineno": 445, "funcName": "process_message", "created": 1753138657.0220559, "msecs": 22.055864334106445, "relativeCreated": 534783.1158638, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}, {"name": "src.core.api_client", "msg": "API call failed after 1 attempts: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 177, "funcName": "call_with_retry", "created": 1753138664.154759, "msecs": 154.75893020629883, "relativeCreated": 541915.8189296722, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}, {"name": "src.core.llm", "msg": "Error processing message: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py", "filename": "llm.py", "module": "llm", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py\", line 382, in process_message\n    response = await resilient_client.chat_completion(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 215, in chat_completion\n    return await self.call_with_retry(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 134, in call_with_retry\n    result = await api_call_func(*args, **kwargs)\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/resources/chat/completions/completions.py\", line 2454, in create\n    return await self._post(\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/_base_client.py\", line 1791, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n  File \"/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/openai/_base_client.py\", line 1591, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'message': \"Invalid value for 'content': expected a string, got null.\", 'type': 'invalid_request_error', 'param': 'messages.[1].content', 'code': None}}", "stack_info": null, "lineno": 445, "funcName": "process_message", "created": 1753138664.154998, "msecs": 154.9980640411377, "relativeCreated": 541916.0580635071, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}]}, "teardown": {"duration": 0.009905750000029911, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_note_update_functionality", "lineno": 415, "outcome": "passed", "keywords": ["test_note_update_functionality", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0009432089999563686, "outcome": "passed"}, "call": {"duration": 23.516714666999974, "outcome": "passed"}, "teardown": {"duration": 0.010091041999999106, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_new_feature_didnt_break_old_features", "lineno": 472, "outcome": "passed", "keywords": ["test_new_feature_didnt_break_old_features", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0008847499999546926, "outcome": "passed"}, "call": {"duration": 49.69419962500001, "outcome": "passed"}, "teardown": {"duration": 0.01042387500001496, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_ai_agents_using_same_patterns", "lineno": 526, "outcome": "passed", "keywords": ["test_ai_agents_using_same_patterns", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0011005000000068321, "outcome": "passed"}, "call": {"duration": 0.0003111250000529253, "outcome": "passed"}, "teardown": {"duration": 0.004459082999915154, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_data_survives_restart", "lineno": 546, "outcome": "passed", "keywords": ["test_data_survives_restart", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0003384579999874404, "outcome": "passed"}, "call": {"duration": 17.071585040999935, "outcome": "passed"}, "teardown": {"duration": 0.010165749999941909, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_multiple_users_share_namespace", "lineno": 571, "outcome": "passed", "keywords": ["test_multiple_users_share_namespace", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0008683749999818247, "outcome": "passed"}, "call": {"duration": 40.21509495800001, "outcome": "passed"}, "teardown": {"duration": 0.009877625000058288, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_not_burning_api_credits", "lineno": 607, "outcome": "passed", "keywords": ["test_not_burning_api_credits", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.0010289580000062415, "outcome": "passed"}, "call": {"duration": 17.271738000000028, "outcome": "passed", "log": [{"name": "src.core.api_client", "msg": "API call failed after 1 attempts: object MagicMock can't be used in 'await' expression", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 177, "funcName": "call_with_retry", "created": 1753138800.41419, "msecs": 414.19005393981934, "relativeCreated": 678175.2500534058, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}, {"name": "src.core.llm", "msg": "Error processing message: object MagicMock can't be used in 'await' expression", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py", "filename": "llm.py", "module": "llm", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py\", line 382, in process_message\n    response = await resilient_client.chat_completion(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 215, in chat_completion\n    return await self.call_with_retry(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 134, in call_with_retry\n    result = await api_call_func(*args, **kwargs)\nTypeError: object MagicMock can't be used in 'await' expression", "stack_info": null, "lineno": 445, "funcName": "process_message", "created": 1753138800.414593, "msecs": 414.592981338501, "relativeCreated": 678175.6529808044, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}, {"name": "src.core.api_client", "msg": "API call failed after 1 attempts: object MagicMock can't be used in 'await' expression", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 177, "funcName": "call_with_retry", "created": 1753138806.248034, "msecs": 248.03400039672852, "relativeCreated": 684009.0939998627, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}, {"name": "src.core.llm", "msg": "Error processing message: object MagicMock can't be used in 'await' expression", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py", "filename": "llm.py", "module": "llm", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py\", line 382, in process_message\n    response = await resilient_client.chat_completion(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 215, in chat_completion\n    return await self.call_with_retry(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 134, in call_with_retry\n    result = await api_call_func(*args, **kwargs)\nTypeError: object MagicMock can't be used in 'await' expression", "stack_info": null, "lineno": 445, "funcName": "process_message", "created": 1753138806.2481332, "msecs": 248.13318252563477, "relativeCreated": 684009.1931819916, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}, {"name": "src.core.api_client", "msg": "API call failed after 1 attempts: object MagicMock can't be used in 'await' expression", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 177, "funcName": "call_with_retry", "created": 1753138811.9985778, "msecs": 998.5778331756592, "relativeCreated": 689759.6378326416, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}, {"name": "src.core.llm", "msg": "Error processing message: object MagicMock can't be used in 'await' expression", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py", "filename": "llm.py", "module": "llm", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/llm.py\", line 382, in process_message\n    response = await resilient_client.chat_completion(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 215, in chat_completion\n    return await self.call_with_retry(\n  File \"/Users/colinaulds/Desktop/projects/markdown-brain-bot/src/core/api_client.py\", line 134, in call_with_retry\n    result = await api_call_func(*args, **kwargs)\nTypeError: object MagicMock can't be used in 'await' expression", "stack_info": null, "lineno": 445, "funcName": "process_message", "created": 1753138811.998806, "msecs": 998.8059997558594, "relativeCreated": 689759.8659992218, "thread": 8470454016, "threadName": "MainThread", "processName": "MainProcess", "process": 72545}]}, "teardown": {"duration": 0.010593165999921439, "outcome": "passed"}}, {"nodeid": "tests/test_ai_babysitter.py::test_system_components_available", "lineno": 640, "outcome": "passed", "keywords": ["test_system_components_available", "asyncio", "pytestmark", "test_ai_babysitter.py", "tests", "markdown-brain-bot", ""], "setup": {"duration": 0.001160416999937297, "outcome": "passed"}, "call": {"duration": 3.6823162079999747, "outcome": "passed"}, "teardown": {"duration": 0.013445666999928108, "outcome": "passed"}}], "warnings": [{"message": "The 'timeout' parameter is deprecated. Please configure it in the http client instead.", "category": "DeprecationWarning", "when": "runtest", "filename": "/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/supabase/_sync/client.py", "lineno": 303}, {"message": "The 'verify' parameter is deprecated. Please configure it in the http client instead.", "category": "DeprecationWarning", "when": "runtest", "filename": "/Users/colinaulds/Library/Python/3.9/lib/python/site-packages/supabase/_sync/client.py", "lineno": 303}]}